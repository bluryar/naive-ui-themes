import { createGenerator, presetMini, presetUno } from 'unocss';
import { describe, expect, it } from 'vitest';
import { presetNaiveThemes, tryRemoveThemeVariant } from './preset-naive-themes';
import type { Theme } from './types';

describe('presetNaiveThemes', () => {
  it('should generate CSS code for light and dark themes', async () => {
    const themes = [
      { name: 'default.light', isDark: false, themeOverrides: { common: { primaryColor: 'transpanret' } } },
      { name: 'default.dark', isDark: true, themeOverrides: { common: { primaryColor: 'rgba(1,1,1,0.2)' } } },
    ];
    const uno = createGenerator({
      presets: [tryRemoveThemeVariant(presetUno()), presetNaiveThemes({ themes })],
    });
    const { css } = await uno.generate(['default.dark:bg-red-500', 'bg-primary', 'bg-theme-default-dark-primary/15']);
    expect(css).toContain('--primary-color: transpanret');
    expect(css).toContain('html.default.light');
    expect(css).toContain('html.default.dark');
    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      .light {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      .dark {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html.default.light {--primary-color: transpanret;}
      html.default.dark {--primary-color: rgba(1, 1, 1, 0.2);}
      html.default.dark .default\\\\.dark\\\\:bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}
      /* layer: default */
      .bg-primary{background-color:var(--primary-color);}
      .bg-theme-default-dark-primary\\\\/15{background-color:rgba(1,1,1,0.15);}"
    `);
  });

  it('should generate CSS code with custom selector and attribute', async () => {
    const themes = [
      { name: 'default.light', isDark: false, themeOverrides: {} },
      { name: 'default.dark', isDark: true, themeOverrides: {} },
    ];
    const uno = createGenerator({
      presets: [presetUno(), presetNaiveThemes({ themes, selector: 'body', attribute: 'data-theme' })],
    });
    const { css } = await uno.generate(['bg-red-500']);
    expect(css).toContain('body[data-theme="default.light"]');
    expect(css).toContain('body[data-theme="default.dark"]');
    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      [data-theme*=\\"light\\"] {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      [data-theme*=\\"dark\\"] {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      body[data-theme=\\"default.light\\"] {}
      body[data-theme=\\"default.dark\\"] {}
      /* layer: default */
      .bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}"
    `);
  });

  it('should generate CSS code with custom cssVarPrefix', async () => {
    const themes: Theme[] = [
      {
        name: 'light',
        isDark: false,
        themeOverrides: { common: { primaryColor: '#ff000011', successColor: 'hsla(100,100%,50%,0.5)' } },
      },
    ];
    const uno = createGenerator({
      presets: [tryRemoveThemeVariant(presetUno()), presetNaiveThemes({ themes, cssVarPrefix: 'my-prefix' })],
    });
    const { css } = await uno.generate([
      'bg-red-500',
      `light:color-[hsla(100,100%,50%,0.5)]`,
      'bg-success',
      'text-primary',
      'text-text-disabled',
    ]);
    expect(css).toContain('--my-prefix-primary-color: rgba(255, 0, 0, 0.07)');
    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      .light {--my-prefix-name: common;--my-prefix-font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--my-prefix-font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--my-prefix-font-weight: 400;--my-prefix-font-weight-strong: 500;--my-prefix-cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--my-prefix-cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--my-prefix-cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--my-prefix-border-radius: 3px;--my-prefix-border-radius-small: 2px;--my-prefix-font-size: 14px;--my-prefix-font-size-mini: 12px;--my-prefix-font-size-tiny: 12px;--my-prefix-font-size-small: 14px;--my-prefix-font-size-medium: 14px;--my-prefix-font-size-large: 15px;--my-prefix-font-size-huge: 16px;--my-prefix-line-height: 1.6;--my-prefix-height-mini: 16px;--my-prefix-height-tiny: 22px;--my-prefix-height-small: 28px;--my-prefix-height-medium: 34px;--my-prefix-height-large: 40px;--my-prefix-height-huge: 46px;--my-prefix-base-color: rgb(255, 255, 255);--my-prefix-primary-color: rgb(24, 160, 88);--my-prefix-primary-color-hover: rgb(54, 173, 106);--my-prefix-primary-color-pressed: rgb(12, 122, 67);--my-prefix-primary-color-suppl: rgb(54, 173, 106);--my-prefix-info-color: rgb(32, 128, 240);--my-prefix-info-color-hover: rgb(64, 152, 252);--my-prefix-info-color-pressed: rgb(16, 96, 201);--my-prefix-info-color-suppl: rgb(64, 152, 252);--my-prefix-success-color: rgb(24, 160, 88);--my-prefix-success-color-hover: rgb(54, 173, 106);--my-prefix-success-color-pressed: rgb(12, 122, 67);--my-prefix-success-color-suppl: rgb(54, 173, 106);--my-prefix-warning-color: rgb(240, 160, 32);--my-prefix-warning-color-hover: rgb(252, 176, 64);--my-prefix-warning-color-pressed: rgb(201, 124, 16);--my-prefix-warning-color-suppl: rgb(252, 176, 64);--my-prefix-error-color: rgb(208, 48, 80);--my-prefix-error-color-hover: rgb(222, 87, 109);--my-prefix-error-color-pressed: rgb(171, 31, 63);--my-prefix-error-color-suppl: rgb(222, 87, 109);--my-prefix-text-color-base: rgb(0, 0, 0);--my-prefix-text-color-1: rgb(31, 34, 37);--my-prefix-text-color-2: rgb(51, 54, 57);--my-prefix-text-color-3: rgb(118, 124, 130);--my-prefix-text-color-disabled: rgb(194, 194, 194);--my-prefix-placeholder-color: rgb(194, 194, 194);--my-prefix-placeholder-color-disabled: rgb(209, 209, 209);--my-prefix-icon-color: rgb(194, 194, 194);--my-prefix-icon-color-hover: rgb(146, 146, 146);--my-prefix-icon-color-pressed: rgb(175, 175, 175);--my-prefix-icon-color-disabled: rgb(209, 209, 209);--my-prefix-opacity-1: 0.82;--my-prefix-opacity-2: 0.72;--my-prefix-opacity-3: 0.38;--my-prefix-opacity-4: 0.24;--my-prefix-opacity-5: 0.18;--my-prefix-divider-color: rgb(239, 239, 245);--my-prefix-border-color: rgb(224, 224, 230);--my-prefix-close-icon-color: rgb(102, 102, 102);--my-prefix-close-icon-color-hover: rgb(102, 102, 102);--my-prefix-close-icon-color-pressed: rgb(102, 102, 102);--my-prefix-close-color-hover: rgba(0, 0, 0, 0.09);--my-prefix-close-color-pressed: rgba(0, 0, 0, 0.13);--my-prefix-clear-color: rgb(194, 194, 194);--my-prefix-clear-color-hover: rgb(146, 146, 146);--my-prefix-clear-color-pressed: rgb(175, 175, 175);--my-prefix-scrollbar-color: rgba(0, 0, 0, 0.25);--my-prefix-scrollbar-color-hover: rgba(0, 0, 0, 0.4);--my-prefix-scrollbar-width: 5px;--my-prefix-scrollbar-height: 5px;--my-prefix-scrollbar-border-radius: 5px;--my-prefix-progress-rail-color: rgb(235, 235, 235);--my-prefix-rail-color: rgb(219, 219, 223);--my-prefix-popover-color: rgb(255, 255, 255);--my-prefix-table-color: rgb(255, 255, 255);--my-prefix-card-color: rgb(255, 255, 255);--my-prefix-modal-color: rgb(255, 255, 255);--my-prefix-body-color: rgb(255, 255, 255);--my-prefix-tag-color: rgb(238, 238, 238);--my-prefix-avatar-color: rgb(204, 204, 204);--my-prefix-inverted-color: rgb(0, 20, 40);--my-prefix-input-color: rgb(255, 255, 255);--my-prefix-code-color: rgb(244, 244, 248);--my-prefix-tab-color: rgb(247, 247, 250);--my-prefix-action-color: rgb(250, 250, 252);--my-prefix-table-header-color: rgb(250, 250, 252);--my-prefix-hover-color: rgb(243, 243, 245);--my-prefix-table-color-hover: rgba(0, 0, 100, 0.03);--my-prefix-table-color-striped: rgba(0, 0, 100, 0.02);--my-prefix-pressed-color: rgb(237, 237, 239);--my-prefix-opacity-disabled: 0.5;--my-prefix-input-color-disabled: rgb(250, 250, 252);--my-prefix-button-color-2: rgba(46, 51, 56, 0.05);--my-prefix-button-color-2-hover: rgba(46, 51, 56, 0.09);--my-prefix-button-color-2-pressed: rgba(46, 51, 56, 0.13);--my-prefix-box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--my-prefix-box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--my-prefix-box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      .dark {--my-prefix-name: common;--my-prefix-font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--my-prefix-font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--my-prefix-font-weight: 400;--my-prefix-font-weight-strong: 500;--my-prefix-cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--my-prefix-cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--my-prefix-cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--my-prefix-border-radius: 3px;--my-prefix-border-radius-small: 2px;--my-prefix-font-size: 14px;--my-prefix-font-size-mini: 12px;--my-prefix-font-size-tiny: 12px;--my-prefix-font-size-small: 14px;--my-prefix-font-size-medium: 14px;--my-prefix-font-size-large: 15px;--my-prefix-font-size-huge: 16px;--my-prefix-line-height: 1.6;--my-prefix-height-mini: 16px;--my-prefix-height-tiny: 22px;--my-prefix-height-small: 28px;--my-prefix-height-medium: 34px;--my-prefix-height-large: 40px;--my-prefix-height-huge: 46px;--my-prefix-base-color: rgb(0, 0, 0);--my-prefix-primary-color: rgb(99, 226, 183);--my-prefix-primary-color-hover: rgb(127, 231, 196);--my-prefix-primary-color-pressed: rgb(90, 206, 167);--my-prefix-primary-color-suppl: rgb(42, 148, 125);--my-prefix-info-color: rgb(112, 192, 232);--my-prefix-info-color-hover: rgb(138, 203, 236);--my-prefix-info-color-pressed: rgb(102, 175, 211);--my-prefix-info-color-suppl: rgb(56, 137, 197);--my-prefix-success-color: rgb(99, 226, 183);--my-prefix-success-color-hover: rgb(127, 231, 196);--my-prefix-success-color-pressed: rgb(90, 206, 167);--my-prefix-success-color-suppl: rgb(42, 148, 125);--my-prefix-warning-color: rgb(242, 201, 125);--my-prefix-warning-color-hover: rgb(245, 213, 153);--my-prefix-warning-color-pressed: rgb(230, 194, 96);--my-prefix-warning-color-suppl: rgb(240, 138, 0);--my-prefix-error-color: rgb(232, 128, 128);--my-prefix-error-color-hover: rgb(233, 139, 139);--my-prefix-error-color-pressed: rgb(229, 114, 114);--my-prefix-error-color-suppl: rgb(208, 58, 82);--my-prefix-text-color-base: rgb(255, 255, 255);--my-prefix-text-color-1: rgba(255, 255, 255, 0.9);--my-prefix-text-color-2: rgba(255, 255, 255, 0.82);--my-prefix-text-color-3: rgba(255, 255, 255, 0.52);--my-prefix-text-color-disabled: rgba(255, 255, 255, 0.38);--my-prefix-placeholder-color: rgba(255, 255, 255, 0.38);--my-prefix-placeholder-color-disabled: rgba(255, 255, 255, 0.28);--my-prefix-icon-color: rgba(255, 255, 255, 0.38);--my-prefix-icon-color-disabled: rgba(255, 255, 255, 0.28);--my-prefix-icon-color-hover: rgba(255, 255, 255, 0.48);--my-prefix-icon-color-pressed: rgba(255, 255, 255, 0.3);--my-prefix-opacity-1: 0.9;--my-prefix-opacity-2: 0.82;--my-prefix-opacity-3: 0.52;--my-prefix-opacity-4: 0.38;--my-prefix-opacity-5: 0.28;--my-prefix-divider-color: rgba(255, 255, 255, 0.09);--my-prefix-border-color: rgba(255, 255, 255, 0.24);--my-prefix-close-icon-color-hover: rgba(255, 255, 255, 0.52);--my-prefix-close-icon-color: rgba(255, 255, 255, 0.52);--my-prefix-close-icon-color-pressed: rgba(255, 255, 255, 0.52);--my-prefix-close-color-hover: rgba(255, 255, 255, 0.12);--my-prefix-close-color-pressed: rgba(255, 255, 255, 0.08);--my-prefix-clear-color: rgba(255, 255, 255, 0.38);--my-prefix-clear-color-hover: rgba(255, 255, 255, 0.48);--my-prefix-clear-color-pressed: rgba(255, 255, 255, 0.3);--my-prefix-scrollbar-color: rgba(255, 255, 255, 0.2);--my-prefix-scrollbar-color-hover: rgba(255, 255, 255, 0.3);--my-prefix-scrollbar-width: 5px;--my-prefix-scrollbar-height: 5px;--my-prefix-scrollbar-border-radius: 5px;--my-prefix-progress-rail-color: rgba(255, 255, 255, 0.12);--my-prefix-rail-color: rgba(255, 255, 255, 0.2);--my-prefix-popover-color: rgb(72, 72, 78);--my-prefix-table-color: rgb(24, 24, 28);--my-prefix-card-color: rgb(24, 24, 28);--my-prefix-modal-color: rgb(44, 44, 50);--my-prefix-body-color: rgb(16, 16, 20);--my-prefix-tag-color: rgb(51, 51, 51);--my-prefix-avatar-color: rgba(255, 255, 255, 0.18);--my-prefix-inverted-color: rgb(0, 0, 0);--my-prefix-input-color: rgba(255, 255, 255, 0.1);--my-prefix-code-color: rgba(255, 255, 255, 0.12);--my-prefix-tab-color: rgba(255, 255, 255, 0.04);--my-prefix-action-color: rgba(255, 255, 255, 0.06);--my-prefix-table-header-color: rgba(255, 255, 255, 0.06);--my-prefix-hover-color: rgba(255, 255, 255, 0.09);--my-prefix-table-color-hover: rgba(255, 255, 255, 0.06);--my-prefix-table-color-striped: rgba(255, 255, 255, 0.05);--my-prefix-pressed-color: rgba(255, 255, 255, 0.05);--my-prefix-opacity-disabled: 0.38;--my-prefix-input-color-disabled: rgba(255, 255, 255, 0.06);--my-prefix-button-color-2: rgba(255, 255, 255, 0.08);--my-prefix-button-color-2-hover: rgba(255, 255, 255, 0.12);--my-prefix-button-color-2-pressed: rgba(255, 255, 255, 0.08);--my-prefix-box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--my-prefix-box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--my-prefix-box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html.light {--my-prefix-primary-color: rgba(255, 0, 0, 0.07);--my-prefix-success-color: rgba(85, 255, 0, 0.5);}
      html.light .light\\\\:color-\\\\[hsla\\\\(100\\\\,100\\\\%\\\\,50\\\\%\\\\,0\\\\.5\\\\)\\\\]{--un-text-opacity:0.5;color:hsla(100,100%,50%,var(--un-text-opacity));}
      /* layer: default */
      .bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}
      .bg-success{background-color:var(--my-prefix-success-color);}
      .text-primary{color:var(--my-prefix-primary-color);}
      .text-text-disabled{color:var(--my-prefix-text-color-disabled);}"
    `);
  });

  it('should generate CSS code with custom layerName', async () => {
    const themes = [
      { name: 'default.light', isDark: false, themeOverrides: {} },
      { name: 'default.dark', isDark: true, themeOverrides: {} },
    ];
    const uno = createGenerator({
      presets: [presetUno(), presetNaiveThemes({ themes, layerName: 'my-layer', layerOrder: 100 })],
    });
    const { css } = await uno.generate(['bg-red-500']);
    expect(css).toContain('/* layer: my-layer */');
    expect(css.split('\n').filter((i) => i.startsWith('/* layer:'))).toHaveLength(3);
    expect(
      css
        .split('\n')
        .filter((i) => i.startsWith('/* layer:'))
        .at(-1),
    ).toBe('/* layer: my-layer */');
    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: default */
      .bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}
      /* layer: my-layer */
      .light {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      .dark {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html.default.light {}
      html.default.dark {}"
    `);
  });

  it('should overrides the breakpoints', async () => {
    const uno = createGenerator({
      presets: [
        presetUno(),
        presetNaiveThemes({
          breakpoints: {
            sm: 480,
            md: 768,
            lg: 1024,
            xl: 1280,
            '2xl': 1536,
          },
        }),
      ],
    });
    const { css } = await uno.generate(['bg-red-500', 'md:bg-primary', 'bg-primary-hover', 'bg-primary-pressed']);

    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      .light {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      .dark {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html.light {}
      html.dark {}
      /* layer: default */
      .bg-primary-hover{background-color:var(--primary-color-hover);}
      .bg-primary-pressed{background-color:var(--primary-color-pressed);}
      .bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}
      @media (min-width: 768px){
      .md\\\\:bg-primary{background-color:var(--primary-color);}
      }"
    `);
  });

  it('should auto import themes file', async () => {
    const options = {
      dir: './packages/naive-ui-themes/test/fixtures/themes',
      dts: './packages/naive-ui-themes/test/fixtures/themes.d.ts',
    };
    const uno = createGenerator({
      presets: [tryRemoveThemeVariant(presetUno()), presetNaiveThemes({ autoimportThemes: !!1, ...options })],
    });

    const { css } = await uno.generate(['bg-body']);
    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      .light {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      .dark {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html.default.light {--body-color: rgb(214, 234, 250);--primary-color: rgb(34, 130, 252);--primary-color-hover: rgb(73, 157, 253);--primary-color-pressed: rgb(21, 96, 208);--primary-color-suppl: rgb(73, 157, 253);--layout-sider-color: rgb(255, 255, 255);--layout-header-color: rgb(34, 130, 252);--layout-tab-color: rgb(255, 255, 255);--scrollbar-track-color: rgba(0, 0, 0, 0);--scrollbar-thumb-color: rgb(225, 225, 225);--scrollbar-width: 8px;--scrollbar-height: 8px;--scrollbar-track-radius: 8px;--scrollbar-thumb-radius: 8px;}
      /* layer: default */
      .bg-body{background-color:var(--body-color);}"
    `);
    expect(css).to.include('--scrollbar-thumb-color');
  });

  it('should generate CSS by html[theme=] selector', async () => {
    const uno = createGenerator({
      presets: [
        presetUno(),
        presetNaiveThemes({
          dir: './packages/naive-ui-themes/test/fixtures/themes',
          patterns: ['*.(light|dark).(json|js|ts|cjs|mjs)'],

          autoimportThemes: !!1,
          layerOrder: -1,
          selector: 'html',
          attribute: 'theme',
        }),
      ],
    });
    const { css } = await uno.generate([
      'bg-red-500',
      'bg-[--layout-header-color]',
      'default.dark:bg-primary/50%',
      '[default.light]:bg-error',

      // 当指定主题后使用主题变量, 就需要去将原本使用 var() 的地方替换成静态的值
      'default.light-color-white',
      '[default.light]-color-white',
      'default.light:bg-primary',
      '[default.light]:bg-white',
      '[default.light]:bg-theme-default-light-primary',

      'default.light:bg-primary/50',
      'default.light:bg-primary/50%',
    ]);
    expect(css).toContain('html[theme="default.light"]');
    expect(css).toContain('--un-theme-opacity:0.5');

    expect(css).toMatchInlineSnapshot(`
      "/* layer: preflights */
      *,::before,::after{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow-inset: ;--un-shadow:0 0 rgba(0,0,0,0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: ;}
      /* layer: un-naive-ui-multi-themes */
      [theme*=\\"light\\"] {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(255, 255, 255);--primary-color: rgb(24, 160, 88);--primary-color-hover: rgb(54, 173, 106);--primary-color-pressed: rgb(12, 122, 67);--primary-color-suppl: rgb(54, 173, 106);--info-color: rgb(32, 128, 240);--info-color-hover: rgb(64, 152, 252);--info-color-pressed: rgb(16, 96, 201);--info-color-suppl: rgb(64, 152, 252);--success-color: rgb(24, 160, 88);--success-color-hover: rgb(54, 173, 106);--success-color-pressed: rgb(12, 122, 67);--success-color-suppl: rgb(54, 173, 106);--warning-color: rgb(240, 160, 32);--warning-color-hover: rgb(252, 176, 64);--warning-color-pressed: rgb(201, 124, 16);--warning-color-suppl: rgb(252, 176, 64);--error-color: rgb(208, 48, 80);--error-color-hover: rgb(222, 87, 109);--error-color-pressed: rgb(171, 31, 63);--error-color-suppl: rgb(222, 87, 109);--text-color-base: rgb(0, 0, 0);--text-color-1: rgb(31, 34, 37);--text-color-2: rgb(51, 54, 57);--text-color-3: rgb(118, 124, 130);--text-color-disabled: rgb(194, 194, 194);--placeholder-color: rgb(194, 194, 194);--placeholder-color-disabled: rgb(209, 209, 209);--icon-color: rgb(194, 194, 194);--icon-color-hover: rgb(146, 146, 146);--icon-color-pressed: rgb(175, 175, 175);--icon-color-disabled: rgb(209, 209, 209);--opacity-1: 0.82;--opacity-2: 0.72;--opacity-3: 0.38;--opacity-4: 0.24;--opacity-5: 0.18;--divider-color: rgb(239, 239, 245);--border-color: rgb(224, 224, 230);--close-icon-color: rgb(102, 102, 102);--close-icon-color-hover: rgb(102, 102, 102);--close-icon-color-pressed: rgb(102, 102, 102);--close-color-hover: rgba(0, 0, 0, 0.09);--close-color-pressed: rgba(0, 0, 0, 0.13);--clear-color: rgb(194, 194, 194);--clear-color-hover: rgb(146, 146, 146);--clear-color-pressed: rgb(175, 175, 175);--scrollbar-color: rgba(0, 0, 0, 0.25);--scrollbar-color-hover: rgba(0, 0, 0, 0.4);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgb(235, 235, 235);--rail-color: rgb(219, 219, 223);--popover-color: rgb(255, 255, 255);--table-color: rgb(255, 255, 255);--card-color: rgb(255, 255, 255);--modal-color: rgb(255, 255, 255);--body-color: rgb(255, 255, 255);--tag-color: rgb(238, 238, 238);--avatar-color: rgb(204, 204, 204);--inverted-color: rgb(0, 20, 40);--input-color: rgb(255, 255, 255);--code-color: rgb(244, 244, 248);--tab-color: rgb(247, 247, 250);--action-color: rgb(250, 250, 252);--table-header-color: rgb(250, 250, 252);--hover-color: rgb(243, 243, 245);--table-color-hover: rgba(0, 0, 100, 0.03);--table-color-striped: rgba(0, 0, 100, 0.02);--pressed-color: rgb(237, 237, 239);--opacity-disabled: 0.5;--input-color-disabled: rgb(250, 250, 252);--button-color-2: rgba(46, 51, 56, 0.05);--button-color-2-hover: rgba(46, 51, 56, 0.09);--button-color-2-pressed: rgba(46, 51, 56, 0.13);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      [theme*=\\"dark\\"] {--name: common;--font-family: v-sans, system-ui, -apple-system, BlinkMacSystemFont, \\"Segoe UI\\", sans-serif, \\"Apple Color Emoji\\", \\"Segoe UI Emoji\\", \\"Segoe UI Symbol\\";--font-family-mono: v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace;--font-weight: 400;--font-weight-strong: 500;--cubic-bezier-ease-in-out: cubic-bezier(.4, 0, .2, 1);--cubic-bezier-ease-out: cubic-bezier(0, 0, .2, 1);--cubic-bezier-ease-in: cubic-bezier(.4, 0, 1, 1);--border-radius: 3px;--border-radius-small: 2px;--font-size: 14px;--font-size-mini: 12px;--font-size-tiny: 12px;--font-size-small: 14px;--font-size-medium: 14px;--font-size-large: 15px;--font-size-huge: 16px;--line-height: 1.6;--height-mini: 16px;--height-tiny: 22px;--height-small: 28px;--height-medium: 34px;--height-large: 40px;--height-huge: 46px;--base-color: rgb(0, 0, 0);--primary-color: rgb(99, 226, 183);--primary-color-hover: rgb(127, 231, 196);--primary-color-pressed: rgb(90, 206, 167);--primary-color-suppl: rgb(42, 148, 125);--info-color: rgb(112, 192, 232);--info-color-hover: rgb(138, 203, 236);--info-color-pressed: rgb(102, 175, 211);--info-color-suppl: rgb(56, 137, 197);--success-color: rgb(99, 226, 183);--success-color-hover: rgb(127, 231, 196);--success-color-pressed: rgb(90, 206, 167);--success-color-suppl: rgb(42, 148, 125);--warning-color: rgb(242, 201, 125);--warning-color-hover: rgb(245, 213, 153);--warning-color-pressed: rgb(230, 194, 96);--warning-color-suppl: rgb(240, 138, 0);--error-color: rgb(232, 128, 128);--error-color-hover: rgb(233, 139, 139);--error-color-pressed: rgb(229, 114, 114);--error-color-suppl: rgb(208, 58, 82);--text-color-base: rgb(255, 255, 255);--text-color-1: rgba(255, 255, 255, 0.9);--text-color-2: rgba(255, 255, 255, 0.82);--text-color-3: rgba(255, 255, 255, 0.52);--text-color-disabled: rgba(255, 255, 255, 0.38);--placeholder-color: rgba(255, 255, 255, 0.38);--placeholder-color-disabled: rgba(255, 255, 255, 0.28);--icon-color: rgba(255, 255, 255, 0.38);--icon-color-disabled: rgba(255, 255, 255, 0.28);--icon-color-hover: rgba(255, 255, 255, 0.48);--icon-color-pressed: rgba(255, 255, 255, 0.3);--opacity-1: 0.9;--opacity-2: 0.82;--opacity-3: 0.52;--opacity-4: 0.38;--opacity-5: 0.28;--divider-color: rgba(255, 255, 255, 0.09);--border-color: rgba(255, 255, 255, 0.24);--close-icon-color-hover: rgba(255, 255, 255, 0.52);--close-icon-color: rgba(255, 255, 255, 0.52);--close-icon-color-pressed: rgba(255, 255, 255, 0.52);--close-color-hover: rgba(255, 255, 255, 0.12);--close-color-pressed: rgba(255, 255, 255, 0.08);--clear-color: rgba(255, 255, 255, 0.38);--clear-color-hover: rgba(255, 255, 255, 0.48);--clear-color-pressed: rgba(255, 255, 255, 0.3);--scrollbar-color: rgba(255, 255, 255, 0.2);--scrollbar-color-hover: rgba(255, 255, 255, 0.3);--scrollbar-width: 5px;--scrollbar-height: 5px;--scrollbar-border-radius: 5px;--progress-rail-color: rgba(255, 255, 255, 0.12);--rail-color: rgba(255, 255, 255, 0.2);--popover-color: rgb(72, 72, 78);--table-color: rgb(24, 24, 28);--card-color: rgb(24, 24, 28);--modal-color: rgb(44, 44, 50);--body-color: rgb(16, 16, 20);--tag-color: rgb(51, 51, 51);--avatar-color: rgba(255, 255, 255, 0.18);--inverted-color: rgb(0, 0, 0);--input-color: rgba(255, 255, 255, 0.1);--code-color: rgba(255, 255, 255, 0.12);--tab-color: rgba(255, 255, 255, 0.04);--action-color: rgba(255, 255, 255, 0.06);--table-header-color: rgba(255, 255, 255, 0.06);--hover-color: rgba(255, 255, 255, 0.09);--table-color-hover: rgba(255, 255, 255, 0.06);--table-color-striped: rgba(255, 255, 255, 0.05);--pressed-color: rgba(255, 255, 255, 0.05);--opacity-disabled: 0.38;--input-color-disabled: rgba(255, 255, 255, 0.06);--button-color-2: rgba(255, 255, 255, 0.08);--button-color-2-hover: rgba(255, 255, 255, 0.12);--button-color-2-pressed: rgba(255, 255, 255, 0.08);--box-shadow-1: 0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12);--box-shadow-2: 0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10);--box-shadow-3: 0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03);}
      html[theme=\\"default.dark\\"] {--primary-color: rgb(255, 0, 0);}
      html[theme=\\"default.light\\"] {--body-color: rgb(214, 234, 250);--primary-color: rgb(34, 130, 252);--primary-color-hover: rgb(73, 157, 253);--primary-color-pressed: rgb(21, 96, 208);--primary-color-suppl: rgb(73, 157, 253);--layout-sider-color: rgb(255, 255, 255);--layout-header-color: rgb(34, 130, 252);--layout-tab-color: rgb(255, 255, 255);--scrollbar-track-color: rgba(0, 0, 0, 0);--scrollbar-thumb-color: rgb(225, 225, 225);--scrollbar-width: 8px;--scrollbar-height: 8px;--scrollbar-track-radius: 8px;--scrollbar-thumb-radius: 8px;}
      html[theme=\\"default.dark\\"] .default\\\\.dark\\\\:bg-primary\\\\/50\\\\%{--un-theme-opacity:0.5;background-color:rgba(255,0,0,var(--un-theme-opacity));}
      html[theme=\\"default.light\\"] .\\\\[default\\\\.light\\\\]\\\\:bg-error{--un-theme-opacity:1;background-color:rgba(208,48,80,var(--un-theme-opacity));}
      html[theme=\\"default.light\\"] .\\\\[default\\\\.light\\\\]\\\\:bg-theme-default-light-primary{--un-bg-opacity:1;background-color:rgba(34,130,252,var(--un-bg-opacity));}
      html[theme=\\"default.light\\"] .\\\\[default\\\\.light\\\\]\\\\:bg-white{--un-bg-opacity:1;background-color:rgba(255,255,255,var(--un-bg-opacity));}
      html[theme=\\"default.light\\"] .default\\\\.light\\\\:bg-primary{--un-theme-opacity:1;background-color:rgba(34,130,252,var(--un-theme-opacity));}
      html[theme=\\"default.light\\"] .default\\\\.light\\\\:bg-primary\\\\/50,
      html[theme=\\"default.light\\"] .default\\\\.light\\\\:bg-primary\\\\/50\\\\%{--un-theme-opacity:0.5;background-color:rgba(34,130,252,var(--un-theme-opacity));}
      html[theme=\\"default.light\\"] .\\\\[default\\\\.light\\\\]-color-white,
      html[theme=\\"default.light\\"] .default\\\\.light-color-white{--un-text-opacity:1;color:rgba(255,255,255,var(--un-text-opacity));}
      /* layer: default */
      .bg-\\\\[--layout-header-color\\\\]{background-color:var(--layout-header-color);}
      .bg-red-500{--un-bg-opacity:1;background-color:rgba(239,68,68,var(--un-bg-opacity));}"
    `);
  });
});

describe('tryRemoveThemeVariant', () => {
  it('should remove the "theme" variant from the presetUno', () => {
    const preset = presetUno();
    expect(preset.variants!.find(({ name }) => name === 'light')).toBeDefined();
    tryRemoveThemeVariant(preset);
    expect(preset.variants!.find(({ name }) => name === 'light')).toBeUndefined();
  });
  it('should remove the "theme" variant from the presetMini', () => {
    const preset = presetMini();

    expect(preset.variants!.find(({ name }) => name === 'light')).toBeDefined();
    tryRemoveThemeVariant(preset);
    expect(preset.variants!.find(({ name }) => name === 'light')).toBeUndefined();
  });
});
